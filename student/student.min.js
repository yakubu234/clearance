function base_url(){
		var pathparts = location.pathname.split('/');
		if (location.host == 'localhost') {
			        var url = location.origin+'/'+pathparts[1].trim('/')+'/'; // http://localhost/myproject/
			    }else{
			        var url = location.origin+'/'; // http://myurl.com
			    }
			    return url;
			}
		var base_url = base_url();
		Dropzone.autoDiscover = false;
		$(".dropzone").dropzone({
			addRemoveLinks: true,
			acceptedFiles: "application/pdf,.pdf,.PDF",
			accept: function(file, done) {
				StartLoad();
				var myDropZone = this;
            	if((file.size/1000) > 400){
            	document.body.scrollTop = document.documentElement.scrollTop = 0;
            	var ele = document.getElementById('analys');
            	ele.style.display='inline-block';
        		ele.innerHTML += '<div  class="alert alert-danger" >upload not successful please ensure your file is not more than 400kb and try again</div>';
				myDropZone.removeAllFiles();
				EndLoad();
				setTimeout('RemoveD()', 5000);
				}else{
				// mylittlefix(file);
				myDropZone.processQueue();
				}  
            done();// !Very important
        	},
        	 success: function (file, response) {
        	 EndLoad();
        	 $('#success-modal-a').modal('show');
        	 setTimeout('RedirectD()', 5000);
        	 // console.log(response)    	 
        	 },error: function (file, response) {
        	 var myDropZone = this;
    	     document.body.scrollTop = document.documentElement.scrollTop = 0;
    	     var ele = document.getElementById('analys');
    	     ele.style.display='inline-block';   
    	     ele.innerHTML += '<div  class="alert alert-danger" >upload not successful please ensure your file is in PDF format and less thank 400kb</div>';
    	     myDropZone.removeAllFiles();
    	     EndLoad();    		
			 setTimeout('RemoveD()', 5000);
            },removedfile: function(file) {
				var name = file.name;
				var _ref;
				return (_ref = file.previewElement) != null ? _ref.parentNode.removeChild(file.previewElement) : void 0;
			}
		});

		function RemoveD(){
			document.getElementById('analys').style.display='none';
		}

		function RedirectD(){ 
			window.location.href = base_url+'student/clearance';
		}


		function StartLoad(){
			let overlay = document.getElementsByClassName('loading-overlay')[0];			
			overlay.classList.toggle('is-active');
		}

		function EndLoad(){
			let overlay = document.getElementsByClassName('loading-overlay')[0];
			overlay.classList.remove('is-active');
		}